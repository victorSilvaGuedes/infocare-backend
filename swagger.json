{
	"openapi": "3.0.0",
	"info": {
		"title": "InfoCare API",
		"version": "1.0.0",
		"description": "Documenta√ß√£o da API InfoCare para gest√£o de interna√ß√µes e comunica√ß√£o."
	},
	"servers": [
		{
			"url": "http://localhost:3333",
			"description": "Servidor de Desenvolvimento"
		}
	],
	"tags": [
		{
			"name": "Familiares",
			"description": "Autentica√ß√£o e gest√£o de Familiares"
		},
		{
			"name": "Profissionais",
			"description": "Autentica√ß√£o e gest√£o de Profissionais de Sa√∫de"
		},
		{
			"name": "Pacientes",
			"description": "Gest√£o de Pacientes (CRUD por Profissionais)"
		},
		{
			"name": "Interna√ß√µes",
			"description": "Gest√£o de Interna√ß√µes e Evolu√ß√µes"
		},
		{
			"name": "Associa√ß√µes",
			"description": "Gest√£o de pedidos de associa√ß√£o Familiar-Interna√ß√£o"
		}
	],
	"paths": {
		"/familiares": {
			"post": {
				"tags": ["Familiares"],
				"summary": "Regista um novo Familiar",
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": { "$ref": "#/components/schemas/FamiliarCreatePayload" }
						}
					}
				},
				"responses": {
					"201": { "description": "Familiar criado" },
					"409": { "description": "CPF ou Email j√° existe" }
				}
			}
		},
		"/familiares/login": {
			"post": {
				"tags": ["Familiares"],
				"summary": "Login do Familiar",
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": { "$ref": "#/components/schemas/LoginPayload" }
						}
					}
				},
				"responses": {
					"200": {
						"description": "Login bem-sucedido",
						"content": {
							"application/json": {
								"schema": { "$ref": "#/components/schemas/LoginResponse" }
							}
						}
					},
					"401": { "description": "Credenciais inv√°lidas" }
				}
			}
		},
		"/familiares/me": {
			"get": {
				"tags": ["Familiares"],
				"summary": "Busca o perfil do Familiar logado (üîí Familiar)",
				"security": [{ "bearerAuth": [] }],
				"responses": {
					"200": { "description": "Dados do familiar" },
					"401": { "description": "N√£o autenticado" },
					"403": { "description": "N√£o √© um familiar" }
				}
			},
			"put": {
				"tags": ["Familiares"],
				"summary": "Atualiza o perfil do Familiar logado (üîí Familiar)",
				"security": [{ "bearerAuth": [] }],
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": { "$ref": "#/components/schemas/FamiliarUpdatePayload" }
						}
					}
				},
				"responses": {
					"200": { "description": "Perfil atualizado" },
					"401": { "description": "N√£o autenticado" }
				}
			},
			"delete": {
				"tags": ["Familiares"],
				"summary": "Apaga a conta do Familiar logado (üîí Familiar)",
				"security": [{ "bearerAuth": [] }],
				"responses": {
					"200": { "description": "Conta apagada" },
					"401": { "description": "N√£o autenticado" }
				}
			}
		},
		"/profissionais": {
			"post": {
				"tags": ["Profissionais"],
				"summary": "Regista um novo Profissional de Sa√∫de",
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": {
								"$ref": "#/components/schemas/ProfissionalCreatePayload"
							}
						}
					}
				},
				"responses": {
					"201": { "description": "Profissional criado" },
					"409": { "description": "CPF, Email, CRM ou Coren j√° existe" }
				}
			}
		},
		"/profissionais/login": {
			"post": {
				"tags": ["Profissionais"],
				"summary": "Login do Profissional de Sa√∫de",
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": { "$ref": "#/components/schemas/LoginPayload" }
						}
					}
				},
				"responses": {
					"200": {
						"description": "Login bem-sucedido",
						"content": {
							"application/json": {
								"schema": { "$ref": "#/components/schemas/LoginResponse" }
							}
						}
					},
					"401": { "description": "Credenciais inv√°lidas" }
				}
			}
		},
		"/profissionais/me": {
			"get": {
				"tags": ["Profissionais"],
				"summary": "Busca o perfil do Profissional logado (üîí Profissional)",
				"security": [{ "bearerAuth": [] }],
				"responses": {
					"200": { "description": "Dados do profissional" },
					"401": { "description": "N√£o autenticado" },
					"403": { "description": "N√£o √© um profissional" }
				}
			},
			"put": {
				"tags": ["Profissionais"],
				"summary": "Atualiza o perfil do Profissional logado (üîí Profissional)",
				"security": [{ "bearerAuth": [] }],
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": {
								"$ref": "#/components/schemas/ProfissionalUpdatePayload"
							}
						}
					}
				},
				"responses": {
					"200": { "description": "Perfil atualizado" },
					"401": { "description": "N√£o autenticado" }
				}
			},
			"delete": {
				"tags": ["Profissionais"],
				"summary": "Apaga a conta do Profissional logado (üîí Profissional)",
				"security": [{ "bearerAuth": [] }],
				"responses": {
					"200": { "description": "Conta apagada" },
					"401": { "description": "N√£o autenticado" }
				}
			}
		},
		"/pacientes": {
			"get": {
				"tags": ["Pacientes"],
				"summary": "Lista todos os pacientes (P√∫blico)",
				"responses": { "200": { "description": "Lista de pacientes" } }
			},
			"post": {
				"tags": ["Pacientes"],
				"summary": "Cadastra um novo paciente (üîí Profissional)",
				"security": [{ "bearerAuth": [] }],
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": { "$ref": "#/components/schemas/PacientePayload" }
						}
					}
				},
				"responses": {
					"201": { "description": "Paciente criado" },
					"401": { "description": "N√£o autenticado" },
					"403": { "description": "Acesso negado" },
					"409": { "description": "CPF j√° existe" }
				}
			}
		},
		"/pacientes/{id}": {
			"get": {
				"tags": ["Pacientes"],
				"summary": "Busca um paciente por ID (P√∫blico)",
				"parameters": [
					{
						"name": "id",
						"in": "path",
						"required": true,
						"schema": { "type": "integer" }
					}
				],
				"responses": {
					"200": { "description": "Dados do paciente" },
					"404": { "description": "Paciente n√£o encontrado" }
				}
			},
			"put": {
				"tags": ["Pacientes"],
				"summary": "Atualiza um paciente (üîí Profissional)",
				"security": [{ "bearerAuth": [] }],
				"parameters": [
					{
						"name": "id",
						"in": "path",
						"required": true,
						"schema": { "type": "integer" }
					}
				],
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": { "$ref": "#/components/schemas/PacientePayload" }
						}
					}
				},
				"responses": {
					"200": { "description": "Paciente atualizado" },
					"401": { "description": "N√£o autenticado" },
					"404": { "description": "Paciente n√£o encontrado" }
				}
			},
			"delete": {
				"tags": ["Pacientes"],
				"summary": "Apaga um paciente e seu hist√≥rico (üîí Profissional)",
				"security": [{ "bearerAuth": [] }],
				"parameters": [
					{
						"name": "id",
						"in": "path",
						"required": true,
						"schema": { "type": "integer" }
					}
				],
				"responses": {
					"200": { "description": "Paciente apagado" },
					"401": { "description": "N√£o autenticado" },
					"404": { "description": "Paciente n√£o encontrado" }
				}
			}
		},
		"/internacoes": {
			"get": {
				"tags": ["Interna√ß√µes"],
				"summary": "Lista todas as interna√ß√µes (P√∫blico)",
				"parameters": [
					{
						"name": "status",
						"in": "query",
						"schema": { "type": "string", "enum": ["ATIVA", "ALTA"] }
					}
				],
				"responses": { "200": { "description": "Lista de interna√ß√µes" } }
			},
			"post": {
				"tags": ["Interna√ß√µes"],
				"summary": "Cria uma nova interna√ß√£o (üîí Profissional)",
				"security": [{ "bearerAuth": [] }],
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": {
								"$ref": "#/components/schemas/InternacaoCreatePayload"
							}
						}
					}
				},
				"responses": {
					"201": { "description": "Interna√ß√£o criada" },
					"401": { "description": "N√£o autenticado" },
					"404": {
						"description": "Paciente/Familiar/Profissional n√£o encontrado"
					}
				}
			}
		},
		"/internacoes/{id}": {
			"get": {
				"tags": ["Interna√ß√µes"],
				"summary": "Busca detalhes de uma interna√ß√£o (üîí Profissional ou Familiar Aprovado)",
				"security": [{ "bearerAuth": [] }],
				"parameters": [
					{
						"name": "id",
						"in": "path",
						"required": true,
						"schema": { "type": "integer" }
					}
				],
				"responses": {
					"200": { "description": "Detalhes da interna√ß√£o" },
					"401": { "description": "N√£o autenticado" },
					"403": { "description": "Acesso negado" },
					"404": { "description": "Interna√ß√£o n√£o encontrada" }
				}
			},
			"put": {
				"tags": ["Interna√ß√µes"],
				"summary": "Atualiza dados de uma interna√ß√£o (üîí Profissional)",
				"security": [{ "bearerAuth": [] }],
				"parameters": [
					{
						"name": "id",
						"in": "path",
						"required": true,
						"schema": { "type": "integer" }
					}
				],
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": {
								"$ref": "#/components/schemas/InternacaoUpdatePayload"
							}
						}
					}
				},
				"responses": {
					"200": { "description": "Interna√ß√£o atualizada" },
					"401": { "description": "N√£o autenticado" },
					"404": { "description": "Interna√ß√£o n√£o encontrada" }
				}
			},
			"delete": {
				"tags": ["Interna√ß√µes"],
				"summary": "Apaga uma interna√ß√£o (üîí Profissional)",
				"security": [{ "bearerAuth": [] }],
				"parameters": [
					{
						"name": "id",
						"in": "path",
						"required": true,
						"schema": { "type": "integer" }
					}
				],
				"responses": {
					"200": { "description": "Interna√ß√£o apagada" },
					"401": { "description": "N√£o autenticado" },
					"404": { "description": "Interna√ß√£o n√£o encontrada" }
				}
			}
		},
		"/internacoes/{id}/alta": {
			"put": {
				"tags": ["Interna√ß√µes"],
				"summary": "Finaliza (d√° alta) a uma interna√ß√£o (üîí Profissional)",
				"security": [{ "bearerAuth": [] }],
				"parameters": [
					{
						"name": "id",
						"in": "path",
						"required": true,
						"schema": { "type": "integer" }
					}
				],
				"responses": {
					"200": { "description": "Interna√ß√£o finalizada" },
					"401": { "description": "N√£o autenticado" },
					"404": { "description": "Interna√ß√£o n√£o encontrada" }
				}
			}
		},
		"/evolucoes": {
			"post": {
				"tags": ["Interna√ß√µes"],
				"summary": "Adiciona uma nova evolu√ß√£o a uma interna√ß√£o (üîí Profissional)",
				"security": [{ "bearerAuth": [] }],
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": { "$ref": "#/components/schemas/EvolucaoPayload" }
						}
					}
				},
				"responses": {
					"201": { "description": "Evolu√ß√£o criada" },
					"400": { "description": "Interna√ß√£o j√° recebeu alta" },
					"401": { "description": "N√£o autenticado" }
				}
			}
		},
		"/evolucoes/{id}": {
			"delete": {
				"tags": ["Interna√ß√µes"],
				"summary": "Apaga uma evolu√ß√£o (üîí Profissional)",
				"security": [{ "bearerAuth": [] }],
				"parameters": [
					{
						"name": "id",
						"in": "path",
						"required": true,
						"schema": { "type": "integer" }
					}
				],
				"responses": {
					"200": { "description": "Evolu√ß√£o apagada" },
					"401": { "description": "N√£o autenticado" },
					"404": { "description": "Evolu√ß√£o n√£o encontrada" }
				}
			}
		},
		"/associacoes": {
			"get": {
				"tags": ["Associa√ß√µes"],
				"summary": "Lista pedidos de associa√ß√£o (üîí Profissional)",
				"security": [{ "bearerAuth": [] }],
				"parameters": [
					{
						"name": "status",
						"in": "query",
						"schema": {
							"type": "string",
							"enum": ["pendente", "aprovada", "rejeitada"]
						}
					}
				],
				"responses": {
					"200": { "description": "Lista de associa√ß√µes" },
					"401": { "description": "N√£o autenticado" }
				}
			},
			"post": {
				"tags": ["Associa√ß√µes"],
				"summary": "Familiar solicita associa√ß√£o a uma interna√ß√£o (üîí Familiar)",
				"security": [{ "bearerAuth": [] }],
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": { "$ref": "#/components/schemas/AssociacaoPayload" }
						}
					}
				},
				"responses": {
					"201": { "description": "Solicita√ß√£o criada" },
					"401": { "description": "N√£o autenticado" },
					"404": { "description": "Interna√ß√£o n√£o encontrada" }
				}
			}
		},
		"/associacoes/{id}/aprovar": {
			"put": {
				"tags": ["Associa√ß√µes"],
				"summary": "Aprova uma solicita√ß√£o de associa√ß√£o (üîí Profissional)",
				"security": [{ "bearerAuth": [] }],
				"parameters": [
					{
						"name": "id",
						"in": "path",
						"required": true,
						"schema": { "type": "integer" }
					}
				],
				"responses": {
					"200": { "description": "Solicita√ß√£o aprovada" },
					"401": { "description": "N√£o autenticado" },
					"404": { "description": "Solicita√ß√£o n√£o encontrada" }
				}
			}
		},
		"/associacoes/{id}/rejeitar": {
			"put": {
				"tags": ["Associa√ß√µes"],
				"summary": "Rejeita uma solicita√ß√£o de associa√ß√£o (üîí Profissional)",
				"security": [{ "bearerAuth": [] }],
				"parameters": [
					{
						"name": "id",
						"in": "path",
						"required": true,
						"schema": { "type": "integer" }
					}
				],
				"responses": {
					"200": { "description": "Solicita√ß√£o rejeitada" },
					"401": { "description": "N√£o autenticado" },
					"404": { "description": "Solicita√ß√£o n√£o encontrada" }
				}
			}
		},
		"/associacoes/{id}": {
			"delete": {
				"tags": ["Associa√ß√µes"],
				"summary": "Apaga uma solicita√ß√£o de associa√ß√£o (üîí Profissional)",
				"security": [{ "bearerAuth": [] }],
				"parameters": [
					{
						"name": "id",
						"in": "path",
						"required": true,
						"schema": { "type": "integer" }
					}
				],
				"responses": {
					"200": { "description": "Solicita√ß√£o apagada" },
					"401": { "description": "N√£o autenticado" },
					"404": { "description": "Solicita√ß√£o n√£o encontrada" }
				}
			}
		}
	},
	"components": {
		"securitySchemes": {
			"bearerAuth": {
				"type": "http",
				"scheme": "bearer",
				"bearerFormat": "JWT",
				"description": "Token JWT obtido no login"
			}
		},
		"schemas": {
			"LoginPayload": {
				"type": "object",
				"properties": {
					"email": { "type": "string", "example": "usuario@email.com" },
					"senha": { "type": "string", "example": "senha123" }
				}
			},
			"LoginResponse": {
				"type": "object",
				"properties": {
					"message": { "type": "string" },
					"token": { "type": "string" },
					"usuario": { "type": "object" }
				}
			},
			"FamiliarCreatePayload": {
				"type": "object",
				"properties": {
					"nome": { "type": "string", "example": "Ana Souza" },
					"cpf": { "type": "string", "example": "123.456.789-00" },
					"email": { "type": "string", "example": "ana.souza@email.com" },
					"senha": { "type": "string", "example": "senha123456" },
					"telefone": { "type": "string", "example": "+5516999998888" }
				}
			},
			"FamiliarUpdatePayload": {
				"type": "object",
				"properties": {
					"nome": { "type": "string" },
					"email": { "type": "string" },
					"telefone": { "type": "string" }
				}
			},
			"ProfissionalCreatePayload": {
				"type": "object",
				"properties": {
					"nome": { "type": "string", "example": "Dr. Mario Paiva" },
					"cpf": { "type": "string", "example": "111.222.333-44" },
					"email": { "type": "string", "example": "mario.paiva@hospital.com" },
					"senha": { "type": "string", "example": "medicosenha123" },
					"tipo": {
						"type": "string",
						"enum": ["MEDICO", "ENFERMEIRO", "OUTRO"],
						"example": "MEDICO"
					},
					"crm": { "type": "string", "example": "12345-SP" },
					"especialidade": { "type": "string", "example": "Cardiologista" }
				}
			},
			"ProfissionalUpdatePayload": {
				"type": "object",
				"properties": {
					"nome": { "type": "string" },
					"email": { "type": "string" },
					"telefone": { "type": "string" },
					"especialidade": { "type": "string" }
				}
			},
			"PacientePayload": {
				"type": "object",
				"properties": {
					"nome": { "type": "string", "example": "Carlos Mendes" },
					"cpf": { "type": "string", "example": "456.789.123-01" },
					"telefone": { "type": "string", "example": "16999998888" },
					"dataNascimento": {
						"type": "string",
						"format": "date",
						"example": "1985-07-20"
					},
					"tipoSanguineo": { "type": "string", "example": "A+" }
				}
			},
			"InternacaoCreatePayload": {
				"type": "object",
				"properties": {
					"idPaciente": { "type": "integer" },
					"idFamiliar": { "type": "integer" },
					"idProfissionalResponsavel": { "type": "integer" },
					"diagnostico": { "type": "string" },
					"observacoes": { "type": "string" },
					"quarto": { "type": "string" },
					"leito": { "type": "string" }
				}
			},
			"InternacaoUpdatePayload": {
				"type": "object",
				"properties": {
					"idFamiliar": { "type": "integer" },
					"idProfissionalResponsavel": { "type": "integer" },
					"diagnostico": { "type": "string" },
					"observacoes": { "type": "string" },
					"quarto": { "type": "string" },
					"leito": { "type": "string" }
				}
			},
			"EvolucaoPayload": {
				"type": "object",
				"properties": {
					"idInternacao": { "type": "integer" },
					"descricao": { "type": "string" }
				}
			},
			"AssociacaoPayload": {
				"type": "object",
				"properties": {
					"idInternacao": { "type": "integer" }
				}
			}
		}
	}
}
